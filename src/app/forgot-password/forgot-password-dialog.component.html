<form [formGroup]="forgotPasswordForm" (ngSubmit)="onSend()">
  <mat-dialog-content>
    <h2 class="forgot-password-title">Password Reset</h2>
    <p class="forgot-password-description">Enter your email address to receive a password reset link.</p>
    
    <div *ngIf="isSuccess" class="success-message">
      <p>A reset link has been sent to {{ forgotPasswordForm.get('email')?.value }}. Please check your email.</p>
    </div>

    <div *ngIf="isError && !isSuccess" class="error-message">
      {{ errorMessage }}
    </div>

    <mat-form-field appearance="fill" *ngIf="!isSuccess">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" type="email" required>
      <mat-error *ngIf="forgotPasswordForm.get('email')?.invalid && (forgotPasswordForm.get('email')?.touched || forgotPasswordForm.get('email')?.dirty)">
        <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">Email is required.</span>
        <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Invalid email format.</span>
      </mat-error>
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button type="button" (click)="onClose()" [disabled]="isSubmitting">
      {{ isSuccess ? 'Close' : 'Cancel' }}
    </button>
    <button mat-button type="submit" [disabled]="forgotPasswordForm.invalid || isSubmitting || isSuccess">
      <span *ngIf="!isSubmitting">Send</span>
      <span *ngIf="isSubmitting">
        <mat-spinner diameter="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;"></mat-spinner>
        Sending...
      </span>
    </button>
  </mat-dialog-actions>
</form>